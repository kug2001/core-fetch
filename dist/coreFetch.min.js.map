{"version":3,"file":"coreFetch.min.js","sources":["../src/utils/state.ts","../src/url/index.ts","../src/body/index.ts","../src/core/fetch.ts"],"sourcesContent":["interface StateObj<T> {\n  value: T;\n}\nexport const state = <T = any>(value: T) => {\n  const obj: StateObj<T> = {\n    value\n  };\n  return new Proxy(obj, {\n    get(target, prop) {\n      return target[prop];\n    },\n    set(target, prop, val, receiver) {\n      return Reflect.set(target, prop, val, receiver);\n    }\n  });\n};\n","import { CreateUrlOptions } from './types';\nimport { state } from '../utils/state';\n\nexport const createUrlInstance = (\n  url: string,\n  options: CreateUrlOptions = {}\n): URL => {\n  // hostInit is require default http:localhost:3000\n  const hostInit = state('http:localhost:3000');\n  if (window) {\n    const { host, port, protocol } = window.location;\n    hostInit.value = `${protocol}//${host}${port ?? `:${port}`}`;\n  }\n  const { hostName, query } = options;\n  const urlInstance = new URL(url, hostName || hostInit.value);\n  // query is not undefined\n  if (query) {\n    const { searchParams } = urlInstance;\n    const queryList = Object.entries(query);\n    queryList.forEach(([key, value]) =>\n      searchParams.append(key, String(value))\n    );\n  }\n  return urlInstance;\n};\n","import { CovertKey, BodyOption } from './types';\n\nexport const bodyConvert = (key: CovertKey, body: BodyOption) => {\n  if (key === 'formData') {\n  } else {\n    return JSON.stringify(body);\n  }\n};\n","import { defu } from 'defu';\nimport { FetchOptions } from './types';\nimport { createUrlInstance } from '../url';\nimport { bodyConvert } from '../body';\n\nexport const coreFetch = (url: string, options: Partial<FetchOptions> = {}) => {\n  const {\n    body,\n    query,\n    credentials,\n    keepalive,\n    integrity,\n    mode,\n    referrerPolicy,\n    redirect\n  } = options;\n\n  /**\n   * 기본값\n   */\n  const defaultOptions: Partial<RequestInit> = {\n    method: 'GET',\n    cache: 'default',\n    keepalive: false,\n    credentials: 'same-origin',\n    mode: 'cors',\n    referrerPolicy: 'no-referrer',\n    redirect: 'follow'\n  };\n\n  /**\n   * URL Instance 생성\n   */\n  const urlInstance = createUrlInstance(url, { query });\n\n  const fetchOptions: RequestInit = {\n    body: bodyConvert('json', body),\n    keepalive,\n    credentials,\n    integrity,\n    mode,\n    referrerPolicy,\n    redirect\n  };\n  return fetch(urlInstance, defu(defaultOptions, fetchOptions));\n};\n"],"names":[],"mappings":"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"}